<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Name Your City's Streets</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="sidebar">
        <!-- Mode Selector -->
        <div class="sidebar-section">
            <h3>Game Mode</h3>
            <div class="form-group">
                <select id="game-mode-select" class="form-input">
                    <option value="streets">Name Streets</option>
                    <option value="intersections">Find Intersections</option>
                </select>
            </div>
        </div>

        <!-- Stats Panel -->
        <div class="sidebar-section">
            <div class="stats-panel">
                <div class="score-display">
                    <span class="score-number" id="score">0.00%</span>
                    <span class="score-label" id="score-label">of street distance</span>
                </div>
                <div class="stats-grid">
                    <div class="stat-item" id="found-stat">
                        <div class="stat-number" id="found-count">0</div>
                        <div class="stat-label" id="found-label">streets found</div>
                    </div>
                    <div class="stat-item" id="percentage-stat">
                        <div class="stat-number" id="count-percentage">0.00%</div>
                        <div class="stat-label" id="count-label">streets by count</div>
                    </div>
                    <div class="stat-item" id="total-stat">
                        <div class="stat-number" id="total-count">0</div>
                        <div class="stat-label" id="total-label">total streets</div>
                    </div>
                    <div class="stat-item" id="distance-stat">
                        <div class="stat-number" id="total-distance">0</div>
                        <div class="stat-label">total miles</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Found Items List (context-dependent) -->
        <div class="sidebar-section" style="flex: 1; display: flex; flex-direction: column;">
            <h3 id="found-list-title">Found Streets</h3>
            <div class="search-container">
                <input type="text" id="item-search" class="search-input" placeholder="Search found items...">
            </div>
            <div id="found-items-list" class="found-items-list">
            </div>
        </div>
        
        <!-- Map Tools -->
        <div class="sidebar-section">
            <h3>Map Tools</h3>
            <div class="form-group switch-container">
                <label for="show-unfound-toggle">Show Unfound Streets</label>
                <label class="switch">
                    <input type="checkbox" id="show-unfound-toggle">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="form-group switch-container">
                <label for="show-street-names-toggle">Show Names on Hover</label>
                <label class="switch">
                    <input type="checkbox" id="show-street-names-toggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        
        <!-- Street Mode: Autofill Tool -->
        <div class="sidebar-section" id="autofill-section">
            <h3>Autofill Numbered Streets</h3>
            <div class="form-group autofill-range">
                <input type="number" id="autofill-from" class="form-input autofill-input" placeholder="From" value="1">
                <input type="number" id="autofill-to" class="form-input autofill-input" placeholder="To" value="10">
                <button id="autofill-btn" class="sidebar-button autofill-button">Autofill</button>
            </div>
        </div>

        <!-- Configuration -->
        <div class="sidebar-section">
            <div class="form-group">
                <button id="set-center-btn" class="sidebar-button">Configure</button>
                <div id="preview-info" class="preview-info" style="display: none;">
                    Area boundary preview shown. Click "Load New Area" to start the game.
                </div>
            </div>
            
            <!-- Intersection Mode: Difficulty Selector -->
            <div class="form-group" id="difficulty-group" style="display: none;">
                <label for="difficulty-select">Intersection Difficulty</label>
                <select id="difficulty-select" class="form-input">
                    <option value="major-major">Major Roads Only</option>
                    <option value="major-all">Major + Local</option>
                    <option value="all-all">All Streets</option>
                </select>
            </div>
            
            <div class="form-group city-input-group" id="city-input-group" style="display: none;">
                <label for="city-input">City, Neighborhood, or Location Name</label>
                <input type="text" id="city-input" class="form-input" placeholder="Enter location and press Enter (e.g. Seattle, WA or Capitol Hill)">
                <div id="city-suggestions" class="city-suggestions"></div>
            </div>
             <div class="form-group" id="load-area-group" style="display: none;">
                <button id="load-area-btn" class="sidebar-button">Load New Area</button>
            </div>
        </div>
        
        <!-- Reset Button -->
        <div class="sidebar-section">
            <button class="sidebar-button" onclick="resetGame()" disabled id="reset-btn">Reset</button>
        </div>
    </div>

    <div class="main-content">
        <div id="map"></div>
        <div class="loading-screen" id="loading-screen">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loading-text">Loading street data...</div>
        </div>
        <div class="game-overlay">
            <!-- Street Mode Input -->
            <div class="input-container" id="street-input-container">
                <input type="text" id="street-input" class="street-input" placeholder="ENTER A STREET" autocomplete="off" disabled>
            </div>
            
            <!-- Intersection Mode Display -->
            <div class="input-container" id="intersection-display-container" style="display: none;">
                <div class="intersection-display">
                    <div class="intersection-label">Find Intersection:</div>
                    <div class="intersection-name" id="target-intersection">5th Ave & Pine St</div>
                    <button id="submit-guess-btn" class="submit-button" style="display: none;">Submit Guess</button>
                    <div class="intersection-instructions">Click on the map to place your guess</div>
                </div>
            </div>
            
            <div id="message" class="message"></div>
            <div id="street-tooltip" class="street-tooltip" style="display: none;"></div>
            
            <!-- Intersection Mode: Accuracy Feedback -->
            <div id="accuracy-display" class="accuracy-display" style="display: none;">
                <div class="accuracy-text">Accuracy: <span id="accuracy-meters">0</span>m away</div>
                <div class="accuracy-score">+<span id="accuracy-points">0</span> points</div>
            </div>
        </div>
    </div>

    <script src="index.js"></script>
</body>
</html>